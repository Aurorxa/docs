# 数据备件与迁移管理

r-nacos运行时使用自定义的分布式文件存储，默认不太方便管理数据。

为了支持用户更方便的管理、使用r-nacos中数据，计划通过语言无关的中间数据文件做数据载体，间接支持r-nacos系统数据和通用数据库数据双向迁移。

## 1. 数据备份

### 1.1 手动数据备份

管理在`控制台>数据迁移页面`可以通过`导出数据`手动完成数据备份。

### 1.2 自动数据备份

1、通过设置备份数据接口token参数`RNACOS_BACKUP_TOKEN`的值,开启数据备份接口。备份数据token默认为空，也就是默认不启用。

2、数据备份http接口说明


接口路径

```
GET /rnacos/backup
```

参数：
```
token: 访问token,调用时参数要与r-nacos配置的参数RNACOS_BACKUP_TOKEN内容一致
```

调用示例：

```sh
curl -o backup.data 'http://127.0.0.1:8848/rnacos/backup?token=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx'
```


3、设置定时任务定时调用备份接口进行数据备份

按自己使用场景设置，略。


## 2. 数据恢复

数据恢复是低频操作，需要管理在控制台手动操作。

管理在`控制台>数据迁移页面`可以通过`导入数据`手动完成数据恢复。




